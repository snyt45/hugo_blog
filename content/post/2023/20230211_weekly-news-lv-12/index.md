---
title: "é€±åˆŠãƒ‹ãƒ¥ãƒ¼ã‚¹ Lv12ï¼ˆ2023å¹´2æœˆ4æ—¥ï½2023å¹´2æœˆ10æ—¥ï¼‰"
description:
slug: "weekly-news-lv-12"
date: 2023-02-11T01:48:03+0900
lastmod: 2023-02-11T01:48:03+0900
image:
math:
draft: false
---

## 2 æœˆ 4 æ—¥(åœŸ)

ç‰¹ã«ãªã—

## 2 æœˆ 5 æ—¥(æ—¥)

TLS çµŒç”±ã§ãƒšãƒ¼ã‚¸ã‚’ãƒ›ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹èª¿æŸ»

- Stripe é–¢é€£ã§ãƒšãƒ¼ã‚¸ã‚’ TLS çµŒç”±ã§ãƒ›ã‚¹ãƒˆã—ã¦ã„ã‚‹ã‹èª¿ã¹ã‚‹å¿…è¦ãŒã‚ã£ãŸã®ã§èª¿æŸ»ã—ã¾ã—ãŸã€‚
- ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‹ã‚‰ç¢ºèªã™ã‚‹
  - Chrome ã‹ã‚‰èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚
    - å‚è€ƒï¼šhttps://www.sukicomi.net/2021/03/chrome_tls_kakunin.html
  - TLS checker ã§ã‚‚èª¿ã¹ã¾ã—ãŸã€‚
    - å‚è€ƒï¼šhttps://scrapbox.io/nwtgck/Webã‚µãƒ¼ãƒãƒ¼ãŒSSL%2FTLSã®ã©ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‹èª¿ã¹ã‚‹ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚µãƒ¼ãƒ“ã‚¹
- ã‚µãƒ¼ãƒãƒ¼å´ã‹ã‚‰ç¢ºèªã™ã‚‹
  - ELB ã‚’ä½¿ã£ã¦ãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚·ãƒ³ã‚°ã—ã¦ã„ãŸã®ã§ã€ELB ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚
  - `ELBSecurityPolicy-2016-08`ã‚’ä½¿ã£ã¦ãŠã‚Šã€ã“ã¡ã‚‰ã¯äº’æ›æ€§ã®ãŸã‚ã« tls1.0 tls1.1 tls1.2 ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚
  - [ğŸ”—](https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/application/create-https-listener.html#describe-ssl-policies)https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/application/create-https-listener.html#describe-ssl-policies
- çµè«–ã¨ã—ã¦ TLS ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‚ˆã†ã§ã—ãŸã€‚

## 2 æœˆ 6 æ—¥(æœˆ)

Go è¨€èªã§å¯¾æˆ¦ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ã‚’ä½œã‚‹ï¼”

- new WebSocket ã®ç›´å¾Œã« send ã™ã‚‹ã¨ã€WebSocket æ¥ç¶šãŒç¢ºç«‹ã™ã‚‹å‰ã« send ã—ã¦ã—ã¾ã„ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¨ã„ã†äº‹è±¡ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚setInterval ã‚’ä½¿ã£ã¦ WebSocket æ¥ç¶šãŒç¢ºç«‹ã•ã‚Œã‚‹ã¾ã§è©¦è¡Œã—ã¦ã€send ã«æˆåŠŸã—ãŸã‚‰ setInterval ã‚’åœæ­¢ã™ã‚‹ã“ã¨ã§å›é¿ã—ã¾ã—ãŸã€‚
  - https://github.com/snyt45/gopher-war/blob/main/src/index.ts#L11-L22
- ã“ã®ã¨ãåˆã‚ã¦ Go ã§ dlb ã‚’ä½¿ã£ã¦ãƒ‡ãƒãƒƒã‚°ã—ã¦ã¿ãŸã®ã§ã™ãŒã€çµæ§‹æ‰‹é †ãŒå¤šãã¦æ…£ã‚Œã‚‹ã¾ã§å¤§å¤‰ãã†ã§ã™ã€‚
- å‰å›ã€TS ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã®ã§ã™ãŒ Go è¨€èªã‚‚æ…£ã‚Œã¦ãŠã‚‰ãšã€TS ã‚‚æ…£ã‚Œã¦ã„ãªã„ã®ã§å®Ÿè£…ã™ã‚‹ãŸã‚ã«å­¦ç¿’ã™ã‚‹ã‚³ã‚¹ãƒˆãŒé«˜ãã¤ããªãƒ¼ã¨ä»Šæ›´æ€ã„ã¾ã—ãŸãŒã›ã£ã‹ãã®æ©Ÿä¼šãªã®ã§ã‚†ã£ãã‚Šã‚„ã£ã¦ã„ã“ã†ã¨æ€ã„ã¾ã™ã€‚

ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ Slack ã«é€šçŸ¥ã™ã‚‹

- Web ã‚¢ãƒ—ãƒªã§ç‰¹å®šã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã«ã§ãã‚‹ã ã‘ãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®æƒ…å ±ã‚’ IP ã‚¢ãƒ‰ãƒ¬ã‚¹ãªã©ã‚’å«ã‚ã¦é€šçŸ¥ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚’ã‚„ã£ãŸã®ã§ã™ãŒã€å¼•ãå‡ºã—ãŒå°‘ãªãã‚ã¾ã‚Šæƒ…å ±ã‚’å‡ºã›ã¾ã›ã‚“ã§ã—ãŸã€‚
- å¾Œã‹ã‚‰ã“ã®ã‚µã‚¤ãƒˆã‚’è¦‹ã¤ã‘ã¦ã“ã†ã„ã†æƒ…å ±ã‚‚å‡ºã›ãŸã‚‰è‰¯ã‹ã£ãŸãªã¨æ€ã£ãŸã®ã§ä¼¼ãŸã‚ˆã†ãªè¦ä»¶ã®ã¨ãã«å‚è€ƒã«ã—ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚
  - https://abashi.net/user-info

## 2 æœˆ 7 æ—¥(ç«)

Rails ã§ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹

- ãŸã¾ã«ã—ã‹ä½¿ã‚ãªã„ã®ã§å¿˜ã‚Œã¦ã—ã¾ã„ã¾ã™ãŒã€generate ã‚³ãƒãƒ³ãƒ‰ã¯ä¾¿åˆ©ã§ã™ã€‚ä¸‹è¨˜ã¯ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒ†ã‚¹ãƒˆä»¥å¤–ã®ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã¯ç”Ÿæˆã—ãªã„ã¨ã„ã†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã¦ã¾ã™ã€‚
- ```javascript
  rails g controller api/v1/posts index create --no-assets --no-helper --skip-routes --no-decorator --skip-template-engine
  ```
- https://qiita.com/terufumi1122/items/634dac88de01f3f73821

Rails ã§ç‰¹å®šã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç¢ºèªã™ã‚‹

- ã„ã¤ã‚‚ã¯`rails routes | grep xxx`ã¿ãŸã„ãªã“ã¨ã‚’ã—ã¦ã„ãŸã‘ã©ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼åã§çµã‚Šè¾¼ã‚ã‚‹ã®ã¯çŸ¥ã‚‰ãªã‹ã£ãŸã€‚
- ```javascript
  rails routes -c ã€ç¢ºèªã—ãŸã„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼åã€‘
  ```
- https://www.tairaengineer-note.com/ruby-on-rails-rails-routes-specific-controller/

Go è¨€èªã§å¯¾æˆ¦ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ ã‚’ä½œã‚‹ï¼•

- ãƒ•ãƒ­ãƒ³ãƒˆã‹ã‚‰å–å¾—ã—ãŸ json ã‚’ Go ã®æ§‹é€ ä½“ã«ç´ã¥ã‘ã‚‹ã®ã« json ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒä¾¿åˆ©ã€‚
- å‚è€ƒï¼šhttps://www.wakuwakubank.com/posts/794-go-json/
- melody ã§æ¥ç¶šã—ãŸã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ãã¯`s.Write([]byte(message))`ãŒä½¿ãˆãŸã€‚
- å‚è€ƒï¼š https://pkg.go.dev/github.com/olahol/melody#Session.Write

## 2 æœˆ 8 æ—¥(æ°´)

composables ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« use ãªã‚“ã¡ã‚ƒã‚‰ã‚’é…ç½®ã™ã‚‹

- ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« composables ã¨ã„ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã‚ã‚Šã€ãã®ä¸­ã« useâ—‹â—‹ ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹ã®ã§ã™ãŒã€æ”¹ã‚ã¦ä½•æ•…ã ã£ã‘ï¼Ÿã¨ãªã£ãŸã®ã§èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚
  - composables
    - ãŠãã‚‰ãè‡ªç¤¾ã®å ´åˆã® composables ã¯ Vue ã‹ã‚‰ãã¦ã„ãã†ã§ã™ã€‚ã€ŒçŠ¶æ…‹ã‚’æŒã¤é–¢æ•°ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€ã¨ã„ã†æ„å‘³åˆã„ãªæ°—ãŒã—ã¾ã—ãŸã€‚
    - https://www.memory-lovers.blog/entry/2022/06/04/180000#:~:text=Nuxt%203%20%2D%20useState-,Composables%E3%81%A8%E3%81%AF%EF%BC%9F,-Vue3%E3%81%AE%E3%83%89%E3%82%AD%E3%83%A5%E3%83%A1%E3%83%B3%E3%83%88
  - useâ—‹â—‹
    - è‡ªç¤¾ã§ä½¿ã£ã¦ã„ã‚‹ã®ã¯ React ãªã®ã§ React ã®æ–‡è„ˆã ã¨æ€ã„ React ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª¿ã¹ã¦ã¿ã¾ã—ãŸã€‚
    - ãŠãã‚‰ãã“ã“ã‚‰ã¸ã‚“ã‹ãªã¨ã€‚useObjective ã®ã‚ˆã†ãªå†…éƒ¨ã§ä»–ã® useStateã€useQuery ãªã©ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ç‹¬è‡ªã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãªã®ã§ useâ—‹â—‹ ã¨ã„ã†æ„Ÿã˜ãªã®ã‹ã¨æ€ã„ã¾ã—ãŸã€‚
    - > ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã¨ã¯ã€åå‰ãŒ â€useâ€ ã§å§‹ã¾ã‚Šã€ã»ã‹ã®ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã›ã‚‹ JavaScript ã®é–¢æ•°ã®ã“ã¨ã§ã™ã€‚
      > https://ja.reactjs.org/docs/hooks-custom.html#extracting-a-custom-hook
  - çµè«–
    - composables ã«ã¯çŠ¶æ…‹ã‚’æŒã¤é–¢æ•°ãŒå«ã¾ã‚Œã‚‹ã€‚
    - useâ—‹â—‹ ã¯å†…éƒ¨ã§ãƒ•ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã€‚ã¾ãŸã€composables ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ useâ—‹â—‹ ã¯çŠ¶æ…‹ã‚‚æŒã£ã¦ã„ã‚‹ã‹ã‚‰ composables ã«é…ç½®ã—ã¦ã„ã‚‹ã€‚

## 2 æœˆ 9 æ—¥(æœ¨)

Sidekiq7.x ã‹ã‚‰`config.log_formatter`ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

- Sidekiq7.x ã¸ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’ã‚„ã£ã¦ã„ã¾ã™ã€‚
- ãã®ã¨ãã«`undefined method log_formatter=`ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚
- `config.logger.formatter`ã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ãŸã¿ãŸã„ã§ã™ã€‚
  - å‚è€ƒï¼šhttps://github.com/mperham/sidekiq/issues/4218#issuecomment-1420433857
- èª¿æŸ»ã—ãŸã¨ãã®ãƒ¡ãƒ¢
  - 7.x ã‹ã‚‰ã¯ config å‘¨ã‚Šã®ãƒ¡ã‚½ãƒƒãƒ‰ç­‰ãŒæ–°ã‚¯ãƒ©ã‚¹ã® `Sidekiq::Config` ã«ç§»ã•ã‚Œã¦ã„ã‚‹
    - 6.5.x
      - `Sidekiq.configure_server` ã‚’å‘¼ã¶ã¨ Sidekiq ã‚¯ãƒ©ã‚¹è‡ªèº«ãŒæŒã£ã¦ã„ã‚‹è¨­å®šç³»ã®ãƒ¡ã‚½ãƒƒãƒ‰ã§è¨­å®šã•ã‚Œã¦ã„ãŸ
      - `config.log_formatter`ã®`config`ã¯ Sidekiq ã‚¯ãƒ©ã‚¹è‡ªèº«
    - 7.x
      - `Sidekiq.configure_server` ã‚’å‘¼ã¶ã¨ `default_configuration` ãŒå‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã€`default_configuration` ã§ã¯ã€ `Sidekiq::Config` ã‚’ç”Ÿæˆã™ã‚‹ã®ã§ã€`Sidekiq::Config` ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã°ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹
      - `config.log_formatter` ã® `config` ã¯ `Sidekiq::Config` ã«ãªã£ãŸ
      - `Sidekiq::Config`ã¯`#log_formatter`ã‚’æŒã£ã¦ã„ãªã„ã®ã§ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚
      - 7.x ã‹ã‚‰ã¯`Sidekiq::Config`ãŒ Ruby ã® Logger ã‚’ç¶™æ‰¿ã—ã¦ã„ã‚‹ã®ã§ã€æœ€çµ‚çš„ã«ã¯ã€ Ruby ã®`Logger#formatter=`ãŒå‘¼ã°ã‚Œã¦ã„ãã†(æœªæ¤œè¨¼)

## 2 æœˆ 10 æ—¥(é‡‘)

Rails ã® minitest ã® Controller ãƒ†ã‚¹ãƒˆã§ 2 ç¨®é¡ã®è¦ªã‚¯ãƒ©ã‚¹ãŒä½¿ã‚ã‚Œã¦ã„ãŸ

- `ActionController::TestCase`ã¨`ActionDispatch::IntegrationTest`ãŒï¼’ã¤ä½¿ã‚ã‚Œã¦ã„ã¦ã€è‡ªå‹•ç”Ÿæˆã§ã¯`ActionDispatch::IntegrationTest`ã‚’ç¶™æ‰¿ã—ãŸã‚¯ãƒ©ã‚¹ãŒç”Ÿæˆã•ã‚Œã¦ã„ã¾ã—ãŸã€‚
- èª¿ã¹ã¦ã¿ã‚‹ã¨`ActionController::TestCase`ã¯éæ¨å¥¨ã§ä»Šã¯`ActionDispatch::IntegrationTest`ã‚’ä½¿ã†ã¿ãŸã„ã§ã™ã€‚
- å‚è€ƒï¼šhttps://api.rubyonrails.org/classes/ActionController/TestCase.html
