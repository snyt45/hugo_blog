---
title: "Docker/Kubernetes 実践コンテナ開発入門@31日目：番外編"
description:
slug: "docker-kubernetes-31days"
date: 2020-11-16T16:04:57+0000
lastmod: 2020-11-16T16:04:57+0000
image:
math:
draft: false
---

[Docker/Kubernetes 実践コンテナ開発入門：書籍案内｜技術評論社](https://gihyo.jp/book/2018/978-4-297-10033-9)

前回はついに Ingress を通じて WEB アプリケーションを公開することができました。

ですがひとつ分かったこととしてクラスタを起動しっぱなしでいると少額ですが 1 日数百円ずつトライアルクレジットから費用が差し引かれていることに気づきました。

今回は番外編としてクラスタを停止する方法について調査しようと思います。

## GCP の Kubernetes Engine のクラスタを停止する方法

まずは管理画面のお支払い > レポートで発生している費用を確認します。

このとき、デフォルトでプロモーションの箇所にチェックがついている方はチェックを外しましょう！

すると、すでに約 2,500 円ほど費用がかかっていることがわかります。

![gkeのレポート](gke.png)

ただ、クラスタを起動しているだけなのにこんなにかかるのですね…

このままだと知らないうちに無料トライアルクレジットを食いつぶしてしまいます。

調べてみましたが、停止するみたいな方法がうまく見つからなかったので簡単な方法としてクラスタを削除する方法で行いました。

- クラスタの削除

![クラスタ削除](cluster-delete.png)

- クラスタ削除中に VM インスタンスを見てみると、インスタンスが停止されている。

![VM削除](vm-delete.png)

- クラスタが削除されるまで 5 分～ 10 分くらいかかりました。
- 削除されたのか見ていきます。

- インスタンスグループは削除されました。

![インスタンスグループ削除](instance-group.png)

- VM インスタンスも削除されました。

![VMインスタンス削除](instance-after.png)

- 最後にクラスタも正常に削除されていることも確認できました。

![クラスター削除](cluster-after.png)

ひとまずこれで数日様子を見てみようと思います。

### 2020 年 11 月 16 日 追記

{{< x user="snyt45" id="1328313316775628802" >}}
